<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <title>document</title>
    <style>
        #input {
            min-height: 50px;
            min-width: 500px;
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="row">

            <div class="col-12 d-flex mt-3">
                <div id="input" class="d-block m-auto"></div>
            </div>
            <div class="col-12 d-flex justify-content-center mt-5">
                <button id="btn_plus" class="btn btn-dark me-3">加</button>
                <button id="btn_minus" class="btn btn-dark me-3">減</button>
                <button id="btn_multiply" class="btn btn-dark me-3">乘</button>
                <button id="btn_Divided" class="btn btn-dark ">除</button>
            </div>
            <div class="col-12 d-flex justify-content-center mt-3">
                <button id="btn_1" class="btn btn-dark me-3">1</button>
                <button id="btn_2" class="btn btn-dark me-3">2</button>
                <button id="btn_3" class="btn btn-dark">3</button>
            </div>
            <div class="col-12 d-flex justify-content-center mt-3">
                <button id="btn_4" class="btn btn-dark me-3">4</button>
                <button id="btn_5" class="btn btn-dark me-3">5</button>
                <button id="btn_6" class="btn btn-dark">6</button>
            </div>
            <div class="col-12 d-flex justify-content-center mt-3">
                <button id="btn_7" class="btn btn-dark me-3">7</button>
                <button id="btn_8" class="btn btn-dark me-3">8</button>
                <button id="btn_9" class="btn btn-dark">9</button>
            </div>
            <div class="col-12 d-flex justify-content-center mt-3">
                <button id="btn_0" class="btn btn-dark me-3">0</button>
                <button id="btn_point" class="btn btn-dark me-3">.</button>
                <button id="btn_equal" class="btn btn-dark ">=</button>
            </div>
            <div class="col-12 d-flex justify-content-center mt-3">
                <button id="btn_reset" class="btn btn-danger w-25">reset</button>
            </div>


        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
    </script>
    <script>
        let numbtnarray = [btn_0, btn_1, btn_2, btn_3, btn_4, btn_5, btn_6, btn_7, btn_8, btn_9]


        let btn_point = document.querySelector('#btn_point')
        let btn_plus = document.querySelector('#btn_plus')
        let btn_minus = document.querySelector('#btn_minus')
        let btn_multiply = document.querySelector('#btn_multiply')
        let btn_Divided = document.querySelector('#btn_Divided')
        let calcbtnarray = [btn_plus, btn_minus, btn_multiply, btn_Divided]
        let btn_equal = document.querySelector('#btn_equal')
        let btn_reset = document.querySelector('#btn_reset')
        let calcwhat = ''
        console.log(calcbtnarray);

        let a1, a2
        window.onload = function () {
            Setpage()
        }

        function Setpage() {

            numbtnarray.forEach((numbtn, index) => {

                if (index == 0) {

                    setNumbtn(numbtn, index.toString())

                } else {
                    setNumbtn(numbtn, index.toString())

                }
            })
            setpoint()
            setcalcbtn()
            reset()
            setequal()
        }
        //小數點顯示控制
        function setpoint() {
            btn_point.disabled = true
            btn_point.onclick = function () {
                input.innerHTML += '.'
                btn_point.disabled = true
                btn_point.onclick = ''
            }

        }

        function setNumbtn(btn, i) {
            btn = document.querySelector(`#btn_${i}`)
            btn.onclick = function () {
                input.innerHTML += i
                btn_0.disabled = false
                btn_point.disabled = false
                calcbtnarray.forEach(calcbtn => {
                    calcbtn.disabled = false
                })
                if (calcwhat != '' && input.innerHTML != '') {
                    btn_equal.disabled = false
                }
            }
        }


        function setcalcbtn() {
            calcbtnarray.forEach((calcbtn, index) => {
                calcbtn.disabled = true
                if (index == 0) {
                    calcbtn.onclick = function () {
                        a1 = Number(input.innerHTML)
                        console.log(a1);
                        input.innerHTML = ''
                        calcwhat = '+'
                        calcbtnarray.forEach((calcbtn, index) => {
                            calcbtn.disabled = true
                            setpoint()
                            numbtnarray.forEach(numbtn => {
                                numbtn.disabled = false
                            })
                        })

                    }
                }
                if (index == 1) {
                    calcbtn.onclick = function () {
                        a1 = Number(input.innerHTML)
                        console.log(a1);
                        input.innerHTML = ''
                        calcwhat = '-'
                        calcbtnarray.forEach((calcbtn, index) => {
                            calcbtn.disabled = true
                            setpoint()
                            numbtnarray.forEach(numbtn => {
                                numbtn.disabled = false
                            })
                        })

                    }
                }
                if (index == 2) {
                    calcbtn.onclick = function () {
                        a1 = Number(input.innerHTML)
                        console.log(a1);
                        input.innerHTML = ''
                        calcwhat = '*'
                        calcbtnarray.forEach((calcbtn, index) => {
                            calcbtn.disabled = true
                            setpoint()
                            numbtnarray.forEach(numbtn => {
                                numbtn.disabled = false
                            })
                        })

                    }
                }
                if (index == 3) {
                    calcbtn.onclick = function () {
                        a1 = Number(input.innerHTML)
                        console.log(a1);
                        input.innerHTML = ''
                        calcwhat = '/'
                        calcbtnarray.forEach((calcbtn, index) => {
                            calcbtn.disabled = true
                            setpoint()
                            numbtnarray.forEach(numbtn => {
                                numbtn.disabled = false
                            })
                        })

                    }
                }

            })

        }

        function setequal() {
            btn_equal.disabled = true
            btn_equal.onclick = function () {
                a2 = Number(input.innerHTML)
                if (calcwhat == '+') {

                    input.innerHTML = (a1 + a2).toString()

                    a1 = a1 + a2
                }
                if (calcwhat == '-') {

                    input.innerHTML = (a1 - a2).toString()

                    a1 = a1 - a2
                }
                if (calcwhat == '*') {

                    input.innerHTML = (a1 * a2).toString()

                    a1 = a1 * a2
                }
                if (calcwhat == '/') {

                    input.innerHTML = (a1 / a2).toString()

                    a1 = a1 / a2
                }

                btn_equal.disabled = true
                numbtnarray.forEach(numbtn => {
                    numbtn.disabled = true
                })
                btn_point.disabled = true
            }

        }

        function reset() {
            btn_reset.onclick = function () {
                input.innerHTML = ''
                a1 = 0
                a2 = 0
                calcwhat = ''
                Setpage()
                document.querySelectorAll('button').forEach(button=>{
                    button.disabled = false
                })
            }
        }
    </script>
</body>

</html>